{"version":3,"file":"index.modern.js","sources":["../src/reducers/todos.js","../src/actions/index.js","../src/reducers/visibilityFilter.js","../src/reducers/index.js","../src/index.js"],"sourcesContent":["const todos = (state = [], action) => {\n  switch (action.type) {\n    case 'ADD_TODO':\n      return [\n        ...state,\n        {\n          id: action.id,\n          text: action.text,\n          completed: false\n        }\n      ]\n    case 'TOGGLE_TODO':\n      return state.map(todo =>\n        (todo.id === action.id)\n          ? {...todo, completed: !todo.completed}\n          : todo\n      )\n    default:\n      return state\n  }\n}\n\nexport default todos\n","let nextTodoId = 0\nexport const addTodo = text => ({\n  type: 'ADD_TODO',\n  id: nextTodoId++,\n  text\n})\n\nexport const setVisibilityFilter = filter => ({\n  type: 'SET_VISIBILITY_FILTER',\n  filter\n})\n\nexport const toggleTodo = id => ({\n  type: 'TOGGLE_TODO',\n  id\n})\n\nexport const VisibilityFilters = {\n  SHOW_ALL: 'SHOW_ALL',\n  SHOW_COMPLETED: 'SHOW_COMPLETED',\n  SHOW_ACTIVE: 'SHOW_ACTIVE'\n}\n","import { VisibilityFilters } from '../actions'\n\nconst visibilityFilter = (state = VisibilityFilters.SHOW_ALL, action) => {\n  switch (action.type) {\n    case 'SET_VISIBILITY_FILTER':\n      return action.filter\n    default:\n      return state\n  }\n}\n\nexport default visibilityFilter\n","import { combineReducers } from 'redux'\nimport todos from './todos'\nimport visibilityFilter from './visibilityFilter'\n\nexport default combineReducers({\n  todos,\n  visibilityFilter\n})\n","import React, { useCallback } from \"react\";\nimport { createStore } from \"redux\";\nimport rootReducer from \"./reducers\";\nimport { Provider, useDispatch, useSelector } from \"react-redux\";\nimport {\n  setVisibilityFilter,\n  addTodo,\n  toggleTodo,\n  VisibilityFilters,\n} from \"./actions\";\n\nconst store = createStore(rootReducer);\n\nconst getVisibleTodos = (todos, filter) => {\n  switch (filter) {\n    case VisibilityFilters.SHOW_ALL:\n      return todos;\n    case VisibilityFilters.SHOW_COMPLETED:\n      return todos.filter((t) => t.completed);\n    case VisibilityFilters.SHOW_ACTIVE:\n      return todos.filter((t) => !t.completed);\n    default:\n      throw new Error(\"Unknown filter: \" + filter);\n  }\n};\n\nconst useTodos = () => {\n  const dispatch = useDispatch();\n\n  return {\n    VISIBILITY_FILTERS: VisibilityFilters,\n    actions: {\n      toggleTodo: (id) => {\n        dispatch(toggleTodo(id));\n      },\n      addTodo: (value) => {\n        dispatch(addTodo(value));\n      },\n      setVisibility: useCallback(\n        (filter) => {\n          return () => {\n            dispatch(setVisibilityFilter(filter));\n          };\n        },\n        [dispatch]\n      ),\n    },\n    selectors: {\n      todos: useSelector((state) => {\n        return getVisibleTodos(state.todos, state.visibilityFilter);\n      }),\n      active: useSelector((state) => {\n        return (filter) => {\n          return filter === state.visibilityFilter;\n        };\n      }),\n    },\n  };\n};\n\nexport const TodosProvider = ({ children }) => {\n  return <Provider store={store}>{children}</Provider>;\n};\n\nexport default useTodos;\n"],"names":["todos","state","action","type","id","text","completed","map","todo","nextTodoId","addTodo","setVisibilityFilter","filter","toggleTodo","VisibilityFilters","SHOW_ALL","SHOW_COMPLETED","SHOW_ACTIVE","visibilityFilter","combineReducers","store","createStore","rootReducer","getVisibleTodos","t","Error","useTodos","dispatch","useDispatch","VISIBILITY_FILTERS","actions","value","setVisibility","useCallback","selectors","useSelector","active","TodosProvider","children"],"mappings":"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"}