{"version":3,"file":"index.modern.js","sources":["../src/reducers/todos.js","../src/actions/index.js","../src/reducers/visibilityFilter.js","../src/reducers/index.js","../src/index.js"],"sourcesContent":["const todos = (state = [], action) => {\n  switch (action.type) {\n    case 'ADD_TODO':\n      return [\n        ...state,\n        {\n          id: action.id,\n          text: action.text,\n          completed: false\n        }\n      ]\n    case 'TOGGLE_TODO':\n      return state.map(todo =>\n        (todo.id === action.id)\n          ? {...todo, completed: !todo.completed}\n          : todo\n      )\n    default:\n      return state\n  }\n}\n\nexport default todos\n","let nextTodoId = 0\nexport const addTodo = text => ({\n  type: 'ADD_TODO',\n  id: nextTodoId++,\n  text\n})\n\nexport const setVisibilityFilter = filter => ({\n  type: 'SET_VISIBILITY_FILTER',\n  filter\n})\n\nexport const toggleTodo = id => ({\n  type: 'TOGGLE_TODO',\n  id\n})\n\nexport const VisibilityFilters = {\n  SHOW_ALL: 'SHOW_ALL',\n  SHOW_COMPLETED: 'SHOW_COMPLETED',\n  SHOW_ACTIVE: 'SHOW_ACTIVE'\n}\n","import { VisibilityFilters } from '../actions'\n\nconst visibilityFilter = (state = VisibilityFilters.SHOW_ALL, action) => {\n  switch (action.type) {\n    case 'SET_VISIBILITY_FILTER':\n      return action.filter\n    default:\n      return state\n  }\n}\n\nexport default visibilityFilter\n","import { combineReducers } from 'redux'\nimport todos from './todos'\nimport visibilityFilter from './visibilityFilter'\n\nexport default combineReducers({\n  todos,\n  visibilityFilter\n})\n","import React, { useCallback } from \"react\";\nimport { createStore } from \"redux\";\nimport rootReducer from \"./reducers\";\nimport { Provider, useDispatch, useSelector } from \"react-redux\";\nimport {\n  setVisibilityFilter,\n  addTodo,\n  toggleTodo,\n  VisibilityFilters,\n} from \"./actions\";\n\nconst store = createStore(rootReducer);\n\nconst getVisibleTodos = (todos, filter) => {\n  switch (filter) {\n    case VisibilityFilters.SHOW_ALL:\n      return todos;\n    case VisibilityFilters.SHOW_COMPLETED:\n      return todos.filter((t) => t.completed);\n    case VisibilityFilters.SHOW_ACTIVE:\n      return todos.filter((t) => !t.completed);\n    default:\n      throw new Error(\"Unknown filter: \" + filter);\n  }\n};\n\nconst useTodos = () => {\n  const dispatch = useDispatch();\n\n  return {\n    VISIBILITY_FILTERS: VisibilityFilters,\n    actions: {\n      toggleTodo: (id) => {\n        dispatch(toggleTodo(id));\n      },\n      addTodo: (value) => {\n        dispatch(addTodo(value));\n      },\n      setVisibility: useCallback(\n        (filter) => {\n          return () => {\n            dispatch(setVisibilityFilter(filter));\n          };\n        },\n        [dispatch]\n      ),\n    },\n    selectors: {\n      todos: useSelector((state) => {\n        return getVisibleTodos(state.todos, state.visibilityFilter);\n      }),\n      active: useSelector((state) => {\n        return (filter) => {\n          return filter === state.visibilityFilter;\n        };\n      }),\n    },\n  };\n};\n\nexport const TodosProvider = ({ children }) => {\n  return <Provider store={store}>{children}</Provider>;\n};\n\nexport default useTodos;\n"],"names":["todos","state","action","type","id","text","completed","map","todo","nextTodoId","addTodo","setVisibilityFilter","filter","toggleTodo","VisibilityFilters","SHOW_ALL","SHOW_COMPLETED","SHOW_ACTIVE","visibilityFilter","combineReducers","store","createStore","rootReducer","getVisibleTodos","t","Error","useTodos","dispatch","useDispatch","VISIBILITY_FILTERS","actions","value","setVisibility","useCallback","selectors","useSelector","active","TodosProvider","children"],"mappings":"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"}